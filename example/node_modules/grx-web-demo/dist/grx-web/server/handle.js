"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.handler = handler;
const router_resgistry_1 = require("../router/router-resgistry");
async function handler(ctx, req, res, url) {
    if (req.method) {
        const handler = (0, router_resgistry_1.getRouteHandler)(req.method, url.pathname);
        if (!handler) {
            res.statusCode = 404;
            res.end('Not Found');
            return;
        }
        try {
            await handler(ctx);
        }
        catch (error) {
            res.statusCode = 500;
            res.end('Internal Server Error');
            console.log(error);
        }
    }
}
